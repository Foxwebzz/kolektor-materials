<div class="grid gap-4 sticky top-4">
  @for (item of materials; track item) {
  <div>
    <p-button
      severity="contrast"
      fluid="true"
      styleClass="!justify-between"
      (onClick)="onMaterialClick(item)"
    >
      <span>{{ item.title }}</span>
      <span class="flex items-center gap-2">
        @if (getSelectedCount(item) > 0) {
          <span class="rounded-full bg-white/20 px-2 py-0.5 text-xs">{{ getSelectedCount(item) }}</span>
        }
        <i [class]="expandedMaterial === item ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
      </span>
    </p-button>

    @if (expandedMaterial === item) {
    <div @enterLeaveHeightAnimation class="mt-2 mb-2 grid gap-2">
      @if (item.options.length > 5) {
      <input
        type="text"
        pInputText
        [(ngModel)]="searchTerm"
        placeholder="PretraÅ¾i..."
        class="w-full"
      />
      } @for (option of getFilteredOptions(item.options); track option.name) {
      <p-button
        [label]="option.name"
        severity="secondary"
        fluid="true"
        styleClass="text-left"
        (onClick)="onOptionClick(item, option)"
      ></p-button>
      }
    </div>
    }
  </div>
  }
</div>
